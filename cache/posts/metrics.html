
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Obviously it is of great importance to understand and utilize the metrics properly also in machine learning. Deriving insights without making clear sense of metrics is like choosing between 1 litre of milk and 0.6 galon of milk. If we dont know well the metrics litre and galon we can't make an healty decision.</p>
<p>In this notebook we talk about the regression model metrics:</p>
<ul>
<li>Mean Squared Error ($MSE$)</li>
<li>R-Squared ($R^2$)</li>
<li>Mean Squared Logarithmic Error ($MSLE$)</li>
</ul>
<p>We will later add new metrics to this notebook by time.
<img src="/images/ruler.jpg" alt="ruler"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<!-- TEASER_END -->
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="R-Squared-(-$R^2$)-and-Mean-Squared-Error-($MSE$)">R-Squared ( $R^2$) and Mean Squared Error ($MSE$)<a class="anchor-link" href="#R-Squared-(-$R^2$)-and-Mean-Squared-Error-($MSE$)">&#182;</a></h2><p><img src="/images/mse_r2.jpg" alt="mse_r2"></p>
<ul>
<li><p>$MSE$ measures how far the data are from the model’s predicted values</p>
</li>
<li><p>$R^2$ measures how far the data are from the model’s predicted values compare to how far the data are from the mean</p>
</li>
<li><p>The difference between how far the data are from the model’s predicted values  and how far the data are from the mean is the improvement in prediction from the regression model.</p>
</li>
</ul>
<h3 id="$MSE$">$MSE$<a class="anchor-link" href="#$MSE$">&#182;</a></h3><ul>
<li>Sensitive to outliers</li>
<li>Has the same units as the response variable. </li>
<li>Lower values of $MSE$ indicate better fit. </li>
<li>Actually, it’s hard to realize if our model is good or not by looking at the absolute values of $MSE$ or $MSE$. </li>
<li>We would probably want to measure how much our model is better than the constant baseline.</li>
</ul>
<p><strong>Disadvantage of MSE</strong>:</p>
<ul>
<li>If we make a single very bad prediction, taking the square will make the error even worse and<ul>
<li>it may skew the metric towards overestimating the model’s badness. </li>
</ul>
</li>
</ul>
<ul>
<li>That is a particularly problematic behaviour if we have noisy data (data that for whatever reason is not entirely reliable) </li>
<li>On the other hand, if all the errors are <strong>smaller than 1</strong>, than it affects in the opposite direction: we may underestimate the model’s badness.</li>
</ul>
<h3 id="$R^2$">$R^2$<a class="anchor-link" href="#$R^2$">&#182;</a></h3><ul>
<li><p>proportional improvement in prediction of the <strong>regression model</strong>, compared to the <strong>mean model</strong> (model predicting all given samples as mean value).</p>
</li>
<li><p>interpreted as the proportion of total variance that is explained by the model.</p>
</li>
<li><p><strong>relative measure</strong> of fit whereas $MSE$ is an <strong>absolute measure</strong> of fit</p>
</li>
<li>often easier to interpret since it doesn't depend on the scale of the data.<ul>
<li>It doesn’t matter if the output values are very large or very small, </li>
</ul>
</li>
<li><p>always has values between <code>-∞</code> and <code>1</code>.</p>
</li>
<li><p>There are situations in which a high $R^2$ is not necessary or relevant.</p>
</li>
<li>When the interest is in the <strong>relationship between variables</strong>, not in prediction, the $R^2$ is less important. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Root-Mean-Squared-Logaritmic-Error-(RMSLE)">Root Mean Squared Logaritmic Error (RMSLE)<a class="anchor-link" href="#Root-Mean-Squared-Logaritmic-Error-(RMSLE)">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/images/cost.jpg" alt="cost"></p>
<p><strong>Mechanism</strong>:</p>
<ul>
<li>It is the Root Mean Squared Error of the <strong>log-transformed predicted</strong> and <strong>log-transformed actual values</strong>. </li>
<li><p><code>RMSLE</code> adds <code>1</code> to both actual and predicted values before taking the natural logarithm to avoid taking the natural log of possible <code>0 (zero)</code> values.</p>
</li>
<li><p>As a result, the function can be used if actual or predicted have <strong>zero-valued</strong> elements. But this function is not appropriate if either is <strong>negative valued</strong></p>
</li>
</ul>
<p><strong>Functionality:</strong></p>
<ul>
<li><p>The expression $$ log(p_i +1) − log(a_i+1)$$ can be written as $$ log((p_i+1) / (a_i+1)) $$</p>
</li>
<li><p>RMSLE measures the ratio of predicted and actual.</p>
</li>
</ul>
<blockquote><p>RMSLE is preferable when</p>
<ul>
<li>targets having exponential growth, such as population counts, average sales of a commodity over a span of years etc </li>
<li>we care about <strong>percentage errors</strong> rather than the <strong>absolute value of errors</strong>.</li>
<li>there is a wide range in the target variables and</li>
<li>we <strong>don’t want to penalize big differences</strong> when <strong>both the predicted and the actual are big numbers</strong>.</li>
<li>we want to penalize <strong>under estimates</strong> more than <strong>over estimates</strong>.</li>
</ul>
</blockquote>
<p>Let's imagine two cases of predictions,</p>
<ul>
<li>Case-1: our model makes a prediction of <code>30</code> when the actual number is <code>40</code> </li>
<li><p>Case-2: our model makes a prediction of <code>300</code> when the actual number is <code>400</code></p>
<ul>
<li>With RMSE the second result is scored as <code>10 times</code> more than the first result</li>
<li>Conversely, with RMSLogE two results are scored the same. </li>
<li>RMSLogE takes into account just the <strong>ratio of change</strong></li>
</ul>
</li>
</ul>
<p>Lets have a look at the below example</p>
<ul>
<li><p>Case-3 :</p>
<ul>
<li><p>Prediction = $600$, Actual = $1000$ (the absolute difference is $400$)</p>
</li>
<li><p>RMSE = $400$,</p>
</li>
<li>RMSLogE = $0.5108$</li>
</ul>
</li>
</ul>
<ul>
<li><p>Case-4 :</p>
<ul>
<li><p>Prediction = $1400$, Actual = $1000$ (the absolute difference is $400$)</p>
</li>
<li><p>RMSE = $400$,</p>
</li>
<li>RMSLogE = $0.3365$</li>
</ul>
</li>
</ul>
<ul>
<li>When the differences are the same between <strong>actual</strong> and <strong>predicted</strong> in both cases. <ul>
<li>RMSE treated them equally, however </li>
<li>RMSLogE penalized the under estimate more than over estimate (under estimated prediction score is higher than over estimated prediction score)</li>
</ul>
</li>
</ul>
<ul>
<li>Often, <strong>penalizing the under estimate more than over estimate</strong> is important for prediction of sales and inventory demands.</li>
<li>To some extent having extra inventory or supply might be more preferable to not being able to providing product as much as the demand. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sources: <br>
<a href="https://www.quora.com/What-is-the-difference-between-an-RMSE-and-RMSLE-logarithmic-error-and-does-a-high-RMSE-imply-low-RMSLE">https://www.quora.com/What-is-the-difference-between-an-RMSE-and-RMSLE-logarithmic-error-and-does-a-high-RMSE-imply-low-RMSLE</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
 

